
process PathComp = {
   service = DaqMonitorROOTBackEnd{ }
  #keep the logging output to a nice level
 untracked PSet options = {
                untracked bool wantSummary = true        # default is false
        }

  include "FWCore/MessageLogger/data/MessageLogger.cfi"
   replace MessageLogger.categories = {"Root_NoDictionary"}  
     
   untracked PSet maxEvents = { untracked int32 input = 1000 }  
   source = PoolSource {
    untracked vstring fileNames =
    {     
'/store/relval/2008/3/6/RelVal-RelValZTT-1204725336-HLT/0000/10E78DE7-27EC-DC11-A298-0030487C5D02.root',
'/store/relval/2008/3/6/RelVal-RelValZTT-1204725336-HLT/0000/22DD116B-27EC-DC11-BCBF-0030487A3232.root',
'/store/relval/2008/3/6/RelVal-RelValZTT-1204725336-HLT/0000/2868D798-25EC-DC11-AFA4-0030487C5E10.root',
'/store/relval/2008/3/6/RelVal-RelValZTT-1204725336-HLT/0000/521B12CA-27EC-DC11-9EC7-000E0C3F0614.root',
'/store/relval/2008/3/6/RelVal-RelValZTT-1204725336-HLT/0000/9066BC65-26EC-DC11-A929-000E0C3F0931.root',
'/store/relval/2008/3/6/RelVal-RelValZTT-1204725336-HLT/0000/A089E7A7-26EC-DC11-A169-0030487A3346.root',
'/store/relval/2008/3/6/RelVal-RelValZTT-1204725336-HLT/0000/EEB2212D-27EC-DC11-AD92-000E0C3EE2D5.root',
'/store/relval/2008/3/6/RelVal-RelValZTT-1204725336-HLT/0000/F832D0A2-28EC-DC11-B320-000E0C3F0987.root'


}
    
   }
include "HLTrigger/btau/data/tau/DoubleTau.cff"
# Make simple lorentzvectors with every MC particles 
  include "HLTriggerOffline/Tau/data/HLTTauMcInfo.cfi"
replace TauMcInfoProducer.BosonPID = 23
replace TauMcInfoProducer.PtMin = 10.
replace TauMcInfoProducer.UsePFTauMatching = false

  module hltSingleTau = hltTauAnalyzer from "HLTriggerOffline/Tau/data/HLTTauAnalyzer.cfi"
   replace hltSingleTau.l1TauTrigger      = "doubleTauL1SeedFilter"
//    replace hltSingleTau.UsingMET = true
    replace hltSingleTau.l2TauJets        = { l2DoubleTauJets}
    replace hltSingleTau.l2TauJetsFiltered = { ecalDoubleTauIsolated:Isolated }
   replace hltSingleTau.l25TauJets        = { isolatedL25PixelTau }
   replace hltSingleTau.l3TauJets         = { isolatedL25PixelTau }
   replace hltSingleTau.rootFile          = "HLTTauAnalyzerDoubleTau.root"   
   replace hltSingleTau.logFile           = "HLTTauAnalyzerDoubleTau.log"  
   replace hltSingleTau.debug             = 2
    replace hltSingleTau.mcProducts       = {TauMcInfoProducer:Jets}
    replace hltSingleTau.nbTaus           = 2 

module jetCrystalsAssociator = JetCrystalsAssociator {
    InputTag EBRecHits =ecalRecHit:EcalRecHitsEB 
    InputTag EERecHits =ecalRecHit:EcalRecHitsEE 
      InputTag jets   = iterativeCone5CaloJets
      double coneSize = 0.5
}

module ecalIsolation = EcalIsolation{
        InputTag JetForFilter = jetCrystalsAssociator
        double SmallCone = 0.15
        double BigCone   = 0.5
        double Pisol = 5.0
}




 module l25PixelIsolationVal = TauTagVal{
string DataType = "TAU"
string OutPutHistograms = "OneProngAndThreeProng" 
        InputTag GenJetProd = iterativeCone5GenJets
  InputTag JetEMTagProd = ecalIsolation
	InputTag JetTagProd = isolatedL25PixelTau 
	string OutPutFile = "tautag_IsoEffValid.root"
	double SignalCone = 0.07
	double MatchingCone = 0.1
        double IsolationCone = 0.3
	double MinimumTransverseMomentumLeadingTrack = 3.
	double 	MinimumTransverseMomentumInIsolationRing = 1.
        int32   MaximumNumberOfTracksIsolationRing = 0	
    }

 include "L1Trigger/Configuration/data/L1Extra.cff"
   include "L1Trigger/Configuration/data/L1Emulator.cff"
 # Magnetic Field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # Geometry
  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

include "Configuration/StandardSequences/data/Reconstruction.cff"
#    path singleTauVal   = { L1Extra,doubleTauL1SeedFilter}
  #  path tttL1 ={doubleTauL1SeedFilter}
 #   path ttt ={TauMcInfoProducer,hltSingleTau }

    # path tL25 ={doubleTauL1SeedFilter&filterDoubleTauEcalIsolation&caloTowersRec&jetCrystalsAssociator&ecalIsolation&l25PixelIsolationVal}
 path tL25 ={ doubleTauL1SeedFilter&filterDoubleTauEcalIsolation&towerMaker&caloTowers&iterativeCone5CaloJets&jetCrystalsAssociator&ecalIsolation&l25PixelIsolationVal}
    
//endpath outpath = { l1gtTrigReport }
}
